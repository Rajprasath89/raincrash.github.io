<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Initializing context in opengl with GLFW &middot; Bits, Pixels and Atoms
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/naringu.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/form.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="./public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <link rel="alternate" type="application/rss+xml" title="Mozilla RSS" href="feed.category.xml">
  </head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61456015-1', 'auto');
  ga('send', 'pageview');

</script>


<body class="theme-6dd">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
      <img width="125" height="125" alt="A photo of ariestiyansyah" src="/images/head.png">
    <p>Random tech musing by Sricharan Chiruvolu</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/categories/">Category Index</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/contact/">Contact</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

    <a class="sidebar-nav-item" href="/assets/resume.pdf">Resume</a>
    <span class="sidebar-nav-item">Version 2.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Bits, Pixels and Atoms</a>
            <small>Random tech musing by Sricharan Chiruvolu</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Initializing context in opengl with GLFW</h1>
  <span class="post-date">05 Dec 2014</span>
  <p>Initializing OpenGL is done by adding context, the state machine that stores all the date that is required to render your application. When you close your application, the context is destroyed and everything is cleaned up.</p>

<p>OpenGL specification doesn&#39;t include creating a window, or defining a context. Hence, we use other libraries to abstract this process. This helps us to make cross-platform applications and save the real essence of OpenGL.</p>

<p>The coding pattern these libraries follow is similar. We begin by specifying the properties of the window. The application will then initiate the event loop. Event handling such as mouse clicks, updating rendering states and drawing.</p>

<p>Here&#39;s how it looks</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &lt;RequiredHeaders&gt;

int main(){

   createWindow();
   createContext();

 while(windowIsOpen){
   while (event == newEvent()){
     handleThatEvent(event);
   }

   updateScene();

   drawRequiedGraphics();
   presentGraphics();
 }
   return 0;
}
</code></pre></div>
<p>The <em>back bufferÂ  _stores the results while rendering a scene to make sure user only sees the final state. The <code>presentGraphics();</code> will copy the result in the back buffer and make it visible to the viewer by placing the result in the _front buffer</em>.</p>

<p>GLFW helps us to inform the drivers that our application is ready for the future and does not depend on the deprecated functions. Supporting resizable windows requires the resources to be reloaded and buffers need to be recreated to adapt the new size.</p>

<p>Coming to what libraries to be used along with OpenGL, we do have a lot of options: <a href="https://www.opengl.org/wiki/Related_toolkits_and_APIs.">https://www.opengl.org/wiki/Related<em>toolkits</em>and_APIs.</a></p>

<p>We will be using GLFW for window and context creation as well as handling inputs. I choose GLFW as it gives more control to OpenGL that other libraries trying hard to be an all-in-one solution and defining there own drawing functions. GLFW gives you a window and OpenGL context with just two function calls.</p>

<p><strong>Building</strong></p>

<ul>
<li><p>Download the necessary library files: <a href="http://www.glfw.org/download.html">http://www.glfw.org/download.html</a>. I will be using version 3.0.4. You can also compile the libraries yourself.</p></li>
<li><p>Add the <code>lib</code> folder in the appropriate library path and link it with <code>GLFW</code>.</p></li>
<li><p>Add <code>include</code> folder to your library path.</p></li>
</ul>

<p><strong>Using GLFW</strong></p>

<p>Include the GLFW header in your program</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &lt;GLFW/glfw3.h&gt; ;

int main(){

}
</code></pre></div>
<p>You need to initialize GLFW when the program starts and ask it to clean-up at the end. <code>glfwInit();</code> and <code>glfwTerminate();</code> with do the work respectively.
Before we create a window, we need to do some configuration.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);
glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 2);
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);

glfwWindowHint(GLFW_RESIZABLE, GL_FALSE);

GLFWwindow* window = glfwCreateWindow(800, 600, &quot;OpenGL&quot;, nullptr, nullptr); // Windowed
GLFWwindow* window = glfwCreateWindow(800, 600, &quot;OpenGL&quot;, glfwGetPrimaryMonitor(), nullptr); // Fullscreen
</code></pre></div>
<p>The above code specifies that it requires GLFW version 3.2 at the least and also that we want a context that only supports the new core functionality. Width, height and window title also needs to be aptly specified. The configuration allows you to specify an existing OpenGL context to share resources like textures with. It also include a function to specify additional requirements for a window. We will address all of them as we dive deep.</p>

<p>Now make the context active:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">glfwMakeContextCurrent(window);
</code></pre></div>
<p>Now you are supposed to create an event loop. GLFW uses a _closed _event loop that is you only handle events when you need to.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">while(!glfwWindowShouldClose(window))
{
    glfwSwapBuffers(window);
    glfwPollEvents();
    ...
}
</code></pre></div>
<p>Note that <code>glfwSwapBuffers(window)</code> and <code>glfwPollEvents()</code> are two required function calls which swaps the front and back buffers after you have finished drawing and retrives window events respectively.
If you are making fullscreen applications, you can handle an escape key to return to the desktop.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">if (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)
    glfwSetWindowShouldClose(window, GL_TRUE);
</code></pre></div>
<p>You have now initialized a window with OpenGL context.</p>

<p>Before we procced, have a glance at the GLFW documentation:<a href="http://www.glfw.org/docs/latest/quick.html"> http://www.glfw.org/docs/latest/quick.html</a>.</p>

<p>Here&#39;s the code. <a href="https://github.com/raincrash/sricharanizedBlogCode/blob/master/init-glfw.cpp"> https://github.com/raincrash/sricharanizedBlogCode/blob/master/init-glfw.cpp</a></p>

<p>We will soon be drawing stuff in this window.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/bioinformatics/2015/08/15/Modelling-a-simple-ga/">
            Modelling a simple genetic algorithm
            <small>15 Aug 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/bioinformatics/2015/08/10/genetic-algorithms-hello-world/">
            A "Hello World!" to the genetic algorithms
            <small>10 Aug 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/gsoc/2015/06/05/pysoy-pysoy-development-part-two/">
            [Pysoy] - Pysoy Development, Part Two
            <small>05 Jun 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'bitspixelsandatoms';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'bitspixelsandatoms';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>

    <div align="center" class="footer">
    <br />
    <a href="https://twitter.com/TheRaincrash" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true">Follow @TheRaincrash</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <br/>
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Bits, Pixels and Atoms</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="mailto:sricharanized@gmail.com" property="cc:attributionName" rel="cc:attributionURL">Sricharan Chiruvolu</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons License.</a><br/>
    </div>
  </body>
</html>

